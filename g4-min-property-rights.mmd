flowchart TD
  A4[P1: Proponer oferta?] -->|No ofrecer| O1[Sin cambios]
  A4 -->|Ofrecer| B4[P2: Aceptar / Rechazar / Robar]
  B4 -->|Aceptar| O2[Intercambiar según oferta/pedido]
  B4 -->|Rechazar| O3[Sin cambios]
  B4 -->|Robar| C4[P1: ¿Denunciar?]
  C4 -->|No| O4[Transferir solo lo ofrecido a P2]
  C4 -->|Sí| J4[AutoJudge revierte robo (confisca oferta a P2)]
  J4 --> O5[Restituir oferta a P1]
