flowchart TD
  Start[G3: Token de repudio/vergÃ¼enza] --> Init[P1: 10 pavos<br/>P2: 10 elotes]
  Init --> A3{P1: Ofrecer tokens?}
  A3 -->|No ofrecer| O1[Sin cambios<br/>â†’ Siguiente ronda]
  A3 -->|Proponer oferta| B3[P1 especifica:<br/>- Ofrecer: X pavos, Y elotes<br/>- Pedir: A pavos, B elotes]
  
  B3 --> C3[UI: Ocultar OfferControls<br/>Mostrar detalles oferta]
  C3 --> D3{P2: Una sola decisiÃ³n}
  
  D3 -->|Aceptar| O2[Intercambiar tokens<br/>â†’ Auto-avance]
  D3 -->|Rechazar| O3[Sin cambios<br/>â†’ Auto-avance]
  D3 -->|Robar| E3[P2 recibe oferta sin pagar<br/>UI: Ocultar botones P2]
  
  E3 --> F3{P1: Â¿Asignar vergÃ¼enza?}
  F3 -->|Asignar| O4a[P2.shameTokens += 1<br/>ðŸ˜¶ Visible en UI<br/>â†’ Auto-avance]
  F3 -->|No asignar| O4b[Sin penalizaciÃ³n<br/>â†’ Auto-avance]
  
  %%{init: {'theme':'dark'}}%%
  style Start fill:#e65100,stroke:#fff,color:#fff
  style Init fill:#ef6c00,stroke:#fff,color:#fff
  style A3 fill:#4527a0,stroke:#fff,color:#fff
  style B3 fill:#512da8,stroke:#fff,color:#fff
  style C3 fill:#37474f,stroke:#fff,color:#fff
  style D3 fill:#455a64,stroke:#fff,color:#fff
  style E3 fill:#bf360c,stroke:#fff,color:#fff
  style F3 fill:#ff6f00,stroke:#fff,color:#fff
  style O1 fill:#424242,stroke:#fff,color:#fff
  style O2 fill:#2e7d32,stroke:#fff,color:#fff
  style O3 fill:#757575,stroke:#fff,color:#fff
  style O4a fill:#ff3d00,stroke:#fff,color:#fff
  style O4b fill:#616161,stroke:#fff,color:#fff
